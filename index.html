<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dose Rate Estimation from In-Situ Gamma-Ray Spectrometry
    Measurements • gamma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Dose Rate Estimation from In-Situ Gamma-Ray Spectrometry
    Measurements">
<meta property="og:description" content="Process in-situ Gamma-Ray Spectrometry for
    Luminescence Dating. This package allows to import, inspect and
    correct the energy shifts of Gamma-ray spectra. It provides methods
    for estimating the gamma dose rate by the use of a calibration curve.
    The package only supports Canberra CNF and TKA files. A shiny
    application provides an exhanced graphical user interface.">
<meta property="og:image" content="https://crp2a.github.io/gamma/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gamma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/gamma.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cerege_1.html">CEREGE Calibration Curve #1</a>
    </li>
    <li>
      <a href="articles/crp2a_1.html">CRP2A Calibration Curve #1</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/crp2a/gamma">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="gamma" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gamma" class="anchor"></a>gamma <img width="120px" src="reference/figures/logo.png" align="right">
</h1></div>

<!-- CRAN badges
[![CRAN Version](http://www.r-pkg.org/badges/version/gamma)](https://cran.r-project.org/package=gamma)
[![CRAN checks](https://cranchecks.info/badges/worst/gamma)](https://cran.r-project.org/web/checks/check_results_gamma.html)
[![CRAN Downloads](http://cranlogs.r-pkg.org/badges/gamma)](https://cran.r-project.org/package=gamma)
-->
<p><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a> <a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></p>
<p><a href="https://doi.org/10.5281/zenodo.2652393"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.2652393.svg" alt="DOI"></a></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><strong>gamma</strong> is intended to process in-situ gamma-ray spectrometry measurements for luminescence dating. This package allows to import, inspect and (automatically) correct the energy scale of the spectrum. It provides methods for estimating the gamma dose rate by the use of a calibration curve. This package only supports Canberra CNF and TKA files.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the development version from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"devtools"</span>)) <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"crp2a/gamma"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>A <a href="https://shiny.rstudio.com"><strong>Shiny</strong></a> application provides an exhanced graphical user interface:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">## Run the app</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="reference/launch_app.html">launch_app</a></span>()</a></code></pre></div>
<p><img src="reference/figures/README-shiny-1.png"></p>
<p>Or, if you need a more reproducible workflow:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">## A minimal example</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## You may want to give extra attention to the energy calibration step</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(gamma)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">## Find the full path to the spectrum file</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">spc_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/test_CNF.cnf"</span>, <span class="dt">package =</span> <span class="st">"gamma"</span>)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Import the spectrum</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">spectrum &lt;-<span class="st"> </span><span class="kw"><a href="reference/read.html">read</a></span>(spc_file)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">## Set the expected chanel/energy peaks for the energy scale calibration</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">## Spectrum pre-processing and peak detection</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">peaks &lt;-<span class="st"> </span>spectrum <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="reference/slice.html">slice_signal</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="reference/stabilize.html">stabilize_signal</a></span>(<span class="dt">transformation =</span> sqrt) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="reference/smooth.html">smooth_signal</a></span>(<span class="dt">method =</span> <span class="st">"savitzky"</span>, <span class="dt">m =</span> <span class="dv">21</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="reference/baseline.html">remove_baseline</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="reference/peaks.html">find_peaks</a></span>()</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"></a>
<a class="sourceLine" id="cb3-21" data-line-number="21">## Set the energy values (in keV)</a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="kw">set_energy</span>(peaks) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">238</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="dv">1461</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="dv">2615</span>)</a>
<a class="sourceLine" id="cb3-23" data-line-number="23">peaks</a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; 8 peaks were detected:</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;   chanel energy</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; 1     86    238</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 2    208     NA</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 3    314     NA</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 4    384     NA</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 5    496   1461</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; 6    596     NA</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; 7    722     NA</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; 8    879   2615</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"></a>
<a class="sourceLine" id="cb3-35" data-line-number="35">## Inspect peaks</a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="kw"><a href="reference/plot.html">plot</a></span>(spectrum, peaks)</a></code></pre></div>
<p><img src="reference/figures/README-usage-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">## Calibrate the energy scale</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">calib &lt;-<span class="st"> </span><span class="kw"><a href="reference/energy.html">calibrate_energy</a></span>(spectrum, peaks)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">## Inspect results</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw"><a href="reference/plot.html">plot</a></span>(calib, <span class="dt">xaxis =</span> <span class="st">"energy"</span>, <span class="dt">yaxis =</span> <span class="st">"rate"</span>)</a></code></pre></div>
<p><img src="reference/figures/README-usage-2.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">## Load the calibration curve for the dose rate estimation</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">## As this curve is instrument specific, you will have to build your own</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">## See help(fit_dose)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(BDX100, <span class="dt">package =</span> <span class="st">"gamma"</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">## Estimate the gamma dose rate</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">(doses &lt;-<span class="st"> </span><span class="kw"><a href="reference/doserate.html">predict_dose</a></span>(BDX100, calib, <span class="dt">simplify =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;              name live_time signal_value signal_error dose_value</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; test_CNF test_CNF   3385.54     126234.7     9.605737   3981.133</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;          dose_error</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; test_CNF   75.23958</span></a></code></pre></div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Please note that the <strong>gamma</strong> project is released with a <a href="https://github.com/crp2a/gamma/blob/master/.github/CODE_OF_CONDUCT.md">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>This work received a state financial support managed by the Agence Nationale de la Recherche (France) throught the program <em>Investissements d’avenir</em> (ref. <a href="https://lascarbx.labex.u-bordeaux.fr">10-LABX-0052</a> and <a href="https://amidex.univ-amu.fr">11-IDEX-0001</a>).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/crp2a/gamma">https://​github.com/​crp2a/​gamma</a>
</li>
<li>Report a bug at <br><a href="http://github.com/crp2a/gamma/issues">http://​github.com/​crp2a/​gamma/​issues</a>
</li>
<li>Visit lab website at <br><a href="http://www.iramat-crp2a.cnrs.fr/spip/">http://​www.iramat-crp2a.cnrs.fr/​spip/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing gamma</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicolas Frerebeau <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0001-5759-4944" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Brice Lebrun <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0001-7503-8685" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Guilhem Paradol <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.u-bordeaux-montaigne.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_ubm.jpg" height="64"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
<li>
<a href="https://www.cnrs.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_cnrs.jpg" height="64"></a> <br><small class="roles"> Funder </small>  </li>
<li>
<a href="https://lascarbx.labex.u-bordeaux.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_idex.png" height="80"></a> <br><small class="roles"> Funder </small>  </li>
<li>
<a href="https://amidex.univ-amu.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_amidex.jpg" height="48"></a> <br><small class="roles"> Funder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://ci.appveyor.com/project/nfrerebeau/gamma/branch/master"><img src="https://ci.appveyor.com/api/projects/status/h7jjppg72oiq9pnf/branch/master?svg=true" alt="Appveyor build status"></a></li>
<li><a href="https://travis-ci.org/crp2a/gamma"><img src="https://travis-ci.org/crp2a/gamma.svg?branch=master" alt="Travis build Status"></a></li>
<li><a href="https://codecov.io/gh/crp2a/gamma"><img src="https://codecov.io/gh/crp2a/gamma/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nicolas Frerebeau, Brice Lebrun, Guilhem Paradol, <a href="https://www.u-bordeaux-montaigne.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_ubm.jpg" height="64"></a>, <a href="https://www.cnrs.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_cnrs.jpg" height="64"></a>, <a href="https://lascarbx.labex.u-bordeaux.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_idex.png" height="80"></a>, <a href="https://amidex.univ-amu.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_amidex.jpg" height="48"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
