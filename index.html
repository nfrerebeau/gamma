<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dose Rate Estimation from In-Situ Gamma-Ray Spectrometry
    Measurements • gamma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Dose Rate Estimation from In-Situ Gamma-Ray Spectrometry
    Measurements">
<meta property="og:description" content="Process in-situ Gamma-Ray Spectrometry for
    Luminescence Dating. This package allows to import, inspect and
    correct the energy shifts of Gamma-ray spectra. It provides methods
    for estimating the gamma dose rate by the use of a calibration curve.
    The package only supports Canberra CNF and TKA files.">
<meta property="og:image" content="https://crp2a.github.io/gamma/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@nfrerebeau">
<meta name="twitter:site" content="@CRP2A">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gamma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/gamma.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cerege_1.html">CEREGE Calibration Curve #1</a>
    </li>
    <li>
      <a href="articles/crp2a_1.html">CRP2A Calibration Curve #1</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/crp2a/gamma/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="gamma-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gamma-" class="anchor"></a>gamma <img width="120px" src="reference/figures/logo.png" align="right">
</h1></div>

<!-- CRAN badges
[![CRAN Version](http://www.r-pkg.org/badges/version/gamma)](https://cran.r-project.org/package=gamma)
[![CRAN checks](https://cranchecks.info/badges/worst/gamma)](https://cran.r-project.org/web/checks/check_results_gamma.html)
[![CRAN Downloads](http://cranlogs.r-pkg.org/badges/gamma)](https://cran.r-project.org/package=gamma)
-->
<p><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a> <a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></p>
<p><a href="https://doi.org/10.5281/zenodo.2652393"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.2652393.svg" alt="DOI"></a></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><strong>gamma</strong> is intended to process in-situ gamma-ray spectrometry measurements for luminescence dating. This package allows to import, inspect and (automatically) correct the energy scale of the spectrum. It provides methods for estimating the gamma dose rate by the use of a calibration curve. This package only supports Canberra CNF and TKA files.</p>
<p>The <a href="https://github.com/crp2a/gammaShiny"><strong>gammaShiny</strong></a> package provides an exhanced graphical user interface for the main applications of <strong>gamma</strong>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the development version from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("remotes")</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"crp2a/gamma"</span>)</pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co">## A minimal example</span>
<span class="co">## You may want to give extra attention to the energy calibration step</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">gamma</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)

<span class="co">## Find the full path to the spectrum file</span>
<span class="no">spc_file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/LaBr.CNF"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"gamma"</span>)

<span class="co">## Import the spectrum</span>
<span class="no">spectrum</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/read.html">read</a></span>(<span class="no">spc_file</span>)

<span class="co">## Set the expected chanel/energy peaks for the energy scale calibration</span>
<span class="co">## Spectrum pre-processing and peak detection</span>
<span class="no">peaks</span> <span class="kw">&lt;-</span> <span class="no">spectrum</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/slice.html">slice_signal</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/stabilize.html">stabilize_signal</a></span>(<span class="kw">transformation</span> <span class="kw">=</span> <span class="no">sqrt</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/smooth.html">smooth_signal</a></span>(<span class="kw">method</span> <span class="kw">=</span> <span class="st">"savitzky"</span>, <span class="kw">m</span> <span class="kw">=</span> <span class="fl">21</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/baseline.html">remove_baseline</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/peaks.html">find_peaks</a></span>()

<span class="co">## Set the energy values (in keV)</span>
<span class="fu">set_energy</span>(<span class="no">peaks</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">238</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">1461</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">2615</span>)
<span class="no">peaks</span>
<span class="co">#&gt; 8 peaks were detected:</span>
<span class="co">#&gt;   chanel energy</span>
<span class="co">#&gt; 1     86    238</span>
<span class="co">#&gt; 2    208     NA</span>
<span class="co">#&gt; 3    314     NA</span>
<span class="co">#&gt; 4    384     NA</span>
<span class="co">#&gt; 5    496   1461</span>
<span class="co">#&gt; 6    596     NA</span>
<span class="co">#&gt; 7    722     NA</span>
<span class="co">#&gt; 8    879   2615</span>

<span class="co">## Inspect peaks</span>
<span class="fu"><a href="reference/plot.html">plot</a></span>(<span class="no">spectrum</span>, <span class="no">peaks</span>)</pre></div>
<p><img src="reference/figures/README-usage-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb3"><pre class="r">
<span class="co">## Calibrate the energy scale</span>
<span class="no">calib</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/energy.html">calibrate_energy</a></span>(<span class="no">spectrum</span>, <span class="no">peaks</span>)

<span class="co">## Load the calibration curve for the dose rate estimation</span>
<span class="co">## As this curve is instrument specific, you will have to build your own</span>
<span class="co">## See help(fit_dose)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"BDX_LaBr_1_curve"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"gamma"</span>)
<span class="no">BDX_LaBr_1_curve</span>
<span class="co">#&gt; Calibration curve:</span>
<span class="co">#&gt; * laboratory: IRAMAT-CRP2A (UMR 5060)</span>
<span class="co">#&gt; * instrument: InSpector 1000</span>
<span class="co">#&gt; * detector: LaBr #1</span>
<span class="co">#&gt; * authors: CRP2A Luminescence Team</span>
<span class="co">#&gt; * date: 2020-02-28 16:31:01</span>

<span class="co">## Estimate the gamma dose rate</span>
(<span class="no">doses</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/doserate.html">predict_dose</a></span>(<span class="no">BDX_LaBr_1_curve</span>, <span class="no">calib</span>, <span class="kw">simplify</span> <span class="kw">=</span> <span class="fl">TRUE</span>))
<span class="co">#&gt; Warning: The following value does not lie in the curve range:</span>
<span class="co">#&gt; * LaBr</span>
<span class="co">#&gt;      name Ni_signal  Ni_error gamma_dose gamma_error</span>
<span class="co">#&gt; LaBr LaBr   141.014 0.3148497   4171.876    92.54298</span></pre></div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Please note that the <strong>gamma</strong> project is released with a <a href="https://github.com/crp2a/gamma/blob/master/.github/CODE_OF_CONDUCT.md">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>This work received a state financial support managed by the Agence Nationale de la Recherche (France) throught the program <em>Investissements d’avenir</em> (ref. <a href="https://lascarbx.labex.u-bordeaux.fr">10-LABX-0052</a> and <a href="https://amidex.univ-amu.fr">11-IDEX-0001</a>).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/crp2a/gamma/">https://​github.com/​crp2a/​gamma/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/crp2a/gamma/issues">https://​github.com/​crp2a/​gamma/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing gamma</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicolas Frerebeau <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0001-5759-4944" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Brice Lebrun <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0001-7503-8685" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Guilhem Paradol <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.u-bordeaux-montaigne.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_ubm.jpg" height="64"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
<li>
<a href="https://www.cnrs.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_cnrs.jpg" height="64"></a> <br><small class="roles"> Funder </small>  </li>
<li>
<a href="https://lascarbx.labex.u-bordeaux.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_idex.png" height="80"></a> <br><small class="roles"> Funder </small>  </li>
<li>
<a href="https://amidex.univ-amu.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_amidex.jpg" height="48"></a> <br><small class="roles"> Funder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/crp2a/gamma/actions"><img src="https://github.com/crp2a/gamma/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/crp2a/gamma"><img src="https://codecov.io/gh/crp2a/gamma/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nicolas Frerebeau, Brice Lebrun, Guilhem Paradol, <a href="https://www.u-bordeaux-montaigne.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_ubm.jpg" height="64"></a>, <a href="https://www.cnrs.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_cnrs.jpg" height="64"></a>, <a href="https://lascarbx.labex.u-bordeaux.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_idex.png" height="80"></a>, <a href="https://amidex.univ-amu.fr"><img src="https://crp2a.github.io/gamma/reference/figures/logo_amidex.jpg" height="48"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
